>[!question]
>GQ1. ì‹±ê¸€í†¤ íŒ¨í„´ (Singleton Pattern)ì´ í•„ìš”í•œ ìƒí™©ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•  ìˆ˜ ìˆì„ê¹Œ? 
>GQ2. ì‹±ê¸€í†¤ (Singleton) ê°ì²´ë¥¼ ë‚¨ìš©í•´ì„œ ì‚¬ìš©í–ˆì„ ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œëŠ” ë¬´ì—‡ì´ ìˆì„ê¹Œ?
>GQ3. ì‹±ê¸€í†¤ (Singleton) ê°ì²´ê°€ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ì•ˆì •ì„± (Thread Safety)ì„ ë³´ì¥í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¼ê¹Œ?

## Description

- ì‹±ê¸€í†¤ íŒ¨í„´ (Singleton Pattern)ì´ë€ ì•± ì „ì²´ì—ì„œ ì „ì—­ì  (global)ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œ **"ê³µìœ  í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ (shared instance of a class)"** ë¥¼ ë§Œë“œëŠ” ë””ìì¸ íŒ¨í„´ì´ë‹¤.


## ì‹±ê¸€í†¤ ì½”ë“œ ì˜ˆì‹œ

+ `static` í‚¤ì›Œë“œë¥¼ ë¶™ì¸ "íƒ€ì… í”„ë¡œí¼í‹° (Type Property)"ë¥¼ ì‚¬ìš©í•´ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ì„ ì–¸í•œë‹¤.
+ ì™¸ë¶€ì—ì„œ Singleton í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ ìƒì„±ì„ ë¶ˆê°€í•˜ë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ ìƒì„±ì `init`ì˜ ì ‘ê·¼ ìˆ˜ì¤€ì„ `private`ë¡œ ì§€ì •í•´ì•¼í•œë‹¤.

```Swift
class Singleton { 
    static let shared = Singleton()
	private init() {}
	/*
	ì´ˆê¸°í™” ì™¸ì— ì¶”ê°€ì ì¸ ì„¤ì •ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš° (í´ë¡œì € í˜¸ì¶œ ê²°ê³¼ë¥¼ ì „ì—­ ìƒìˆ˜ì— í• ë‹¹)
	static let shared: Singleton = { 
		let instance = Singleton() 
		// setup code 
		return instance 
	}()
	*/
}
```


- ì‚¬ìš©í•  ë•ŒëŠ” `shared`ë¼ëŠ” ìœ„ì—ì„œ ì„ ì–¸í•œ íƒ€ì… í”„ë¡œí¼í‹°ë¡œ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

```Swift
Singleton.shared.ì–´ì©Œêµ¬ë©”ì„œë“œ()
```

>[!question] ì‹±ê¸€í†¤ ê°ì²´ì˜ ì´ë¦„ì€ í•­ìƒ sharedì—¬ì•¼ í•˜ëŠ”ê°€?
>ì•„ë‹ˆë‹¤. ê·¸ëƒ¥ ê´€ìŠµì ìœ¼ë¡œ ì“°ëŠ” ì´ë¦„ì´ë¼, ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš©í•´ë„ ìƒê´€ì€ ì—†ë‹¤ê³  í•œë‹¤.
>
>ë‹¨ Appleì´ ê³µì‹ í”„ë ˆì„ì›Œí¬ì—ì„œ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ë³´ë©´,
>- UserDefaults.standard (ëŒ€í‘œ ì„¤ì •ì´ë‚˜ ê·œì¹™ì„ ì˜ë¯¸)
>- UIScreen.main (ë©”ì¸ì„ ì˜ë¯¸)
>- FileManager.default (ê¸°ë³¸ê°’ ì„¤ì •)
>- NotificationCenter.default  (ê¸°ë³¸ê°’ ì„¤ì •)
>- UIApplication.shared (ê°€ì¥ ì¼ë°˜ì . ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì‹±ê¸€í†¤)
>- URLSession.shared (ê°€ì¥ ì¼ë°˜ì . ì „ì—­ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì‹±ê¸€í†¤) ë“±ìœ¼ë¡œ ë§¤ìš° ë‹¤ì–‘í•˜ë‹¤.
>  
>  ì¦‰, ê·¸ëŸ° ì ì—ì„œ ë³¼ ë•Œ ê¼­ `shared`í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ë§Œë“¤ í•„ìš”ëŠ” ì—†ë‹¤ê³  ì •ì˜í•  ìˆ˜ ìˆê² ë‹¤.
>  ê° í‚¤ì›Œë“œëŠ” Apple í”„ë ˆì„ì›Œí¬ì—ì„œ ì •ì˜ëœ ì‹±ê¸€í†¤ ì´ë¦„ì„ ì°¸ê³ í•´ ë§Œë“¤ë©´ ì¢‹ê² ì¥¬?



## ì‹±ê¸€í†¤ ì‚¬ìš©ì‹œ ì¥ë‹¨ì 

### ğŸ‘ğŸ» ì¥ì 

+ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œë§Œ ì‚¬ìš©í•˜ê¸°ì—, ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ (ë©”ëª¨ë¦¬ ë‚­ë¹„)ë¥¼ ìœ ë°œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.
+ **ì—¬ëŸ¬ ìì›ì—ì„œ ê°™ì€ ê°ì²´ì˜ ì‚¬ìš©ì´ í•„ìš”í•œ ê³µìœ  ìì› (ì•± ì „ì—­ì—ì„œ ì ‘ê·¼ê°€ëŠ¥í•´ì•¼ í•˜ëŠ” ìƒíƒœ, ì•± ì„¤ì • ë“±)ì˜ ê²½ìš°**, ì‹±ê¸€í†¤ ê°ì²´ì˜ ì‚¬ìš©ì„ í™œìš©í•˜ë©´ ìš©ì´í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. -> ìƒíƒœì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸°ê°€ ìš©ì´í•˜ë‹¤.
+ ì¸ìŠ¤í„´ìŠ¤ê°€ ìµœì´ˆ ì ‘ê·¼ ì‹œ (ì§€ì—° ì´ˆê¸°í™”ë˜ì–´) í•œ ë²ˆë§Œ ìƒì„±ë˜ê¸°ì— ë¶ˆí•„ìš”í•œ ì´ˆê¸°í™”ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤.

>[!question] ì‹±ê¸€í†¤ ê°ì²´ì˜ ì§€ì—° ì´ˆê¸°í™”ì— ëŒ€í•˜ì—¬ ê¹Šê²Œ íŒŒë³´ê¸°
>[[ì§€ì—° ì´ˆê¸°í™” (lazy initialization)]]ë€ "í”„ë¡œí¼í‹°ì— ìµœì´ˆë¡œ ì ‘ê·¼í•˜ëŠ” ë¹„ë¡œì†Œ ê°’ì„ ìƒì„±í•˜ëŠ” ë°©ì‹"ì´ë‹¤. 
>ì¦‰, í”„ë¡œê·¸ë¨ ì‹œì‘ ì‹œì ì´ ì•„ë‹ˆë¼ / í•„ìš”í•´ì§€ë©´, ë¹„ë¡œì†Œ ê·¸ì œì„œì•¼ ë§Œë“œëŠ” (ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ëŠ”) ê°œë…!
>Swiftì—ì„œëŠ” [[lazy]]ë¼ëŠ” í‚¤ì›Œë“œ í˜¹ì€ [[static let]] í‚¤ì›Œë“œë¥¼ ë¶™ì¸ ì‹±ê¸€í†¤ ê°ì²´ê°€ "ì§€ì—° ì´ˆê¸°í™”" ë°©ì‹ì„ ì±„íƒí•œë‹¤. 
>
>ê·¸ë ‡ë‹¤ë©´ ì™œ?
>
>- ë©”ëª¨ë¦¬ ì ˆì•½ ë˜ë‹ˆê¹Œ! ì•„ì§ ì‚¬ìš©í•˜ê¸° ì „ì¸ë° ë©”ëª¨ë¦¬ ê³µê°„ì„ ì°¨ì§€í•  í•„ìš”ëŠ” ì—†ìœ¼ë‹ˆê¹Œ!
>  
>  ì‚¬ì‹¤ ì´ê²ƒë³´ë‹¤ ë” ì¤‘ìš”í•œ ê²ƒì€...
>- [[ìŠ¤ë ˆë“œ ì•ˆì „ (Thread Safety)]]í•˜ê²Œ ì‘ë™í•  ìˆ˜ ìˆë„ë¡ ë•ê¸° ë•Œë¬¸ì—!
>  
>	- `static let`ì´ ë¶™ì–´ìˆìœ¼ë©´ ìë™ìœ¼ë¡œ LLVMì´ ìë™ìœ¼ë¡œ ***Thread-safe*** Lazy Initializationì„ ì ìš©í•´ì£¼ë„ë¡ êµ¬í˜„ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤!
> 	- ìœ„ì™€ ê°™ì€ ìƒí™©ì„ ì›ìì  ì´ˆê¸°í™” (Atomic Initialization)ë¼ê³  ë¶€ë¥´ëŠ”ë°, ë‚´ë¶€ì ìœ¼ë¡œ `dispatch_once`ì™€ ìœ ì‚¬í•œ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤!
> 	- ì—¬ê¸°ì„œ `dispatch_once`ë€ Swift ì´ˆê¸°ì—ì„œ "í•´ë‹¹ ì½”ë“œë¥¼ ì•± ì „ì²´ì—ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë„ë¡ ë³´ì¥í•˜ë„ë¡, ìŠ¤ë ˆë“œ ì•ˆì „ì˜ ëª©ì "ìœ¼ë¡œ ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•˜ë˜ ë©”ì„œë“œë¥¼ ì˜ë¯¸.


### ğŸ‘ğŸ» ë‹¨ì 

+ ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ **ë™ê¸°í™” ì´ìŠˆ**ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. 
  -> ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„í•˜ì§€ ì•Šìœ¼ë©´ ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìœ„í—˜ì´ ìˆìœ¼ë©°, ìŠ¤ë ˆë“œ ì•ˆì „ì„ ìœ„í•´ ì¶”ê°€ êµ¬í˜„ì´ í•„ìš”í•˜ë‹¤.
  -> ì´ ì¶”ê°€ êµ¬í˜„ì´ ìœ„ì—ì„œ ë´¤ë˜ [[static let]] í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ [[ì§€ì—° ì´ˆê¸°í™” (lazy initialization)]] ì „ëµìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ê²ƒ!

+ ì „ì—­ ìƒíƒœ (Global State)ë¼ëŠ” íŠ¹ì„±. ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤ ì‚¬ì´ì—  **ì•”ë¬µì  ì˜ì¡´ì„± (ì˜ì¡´ì„± ì€ë‹‰)** ì´ ìƒê¹€. + **ëª¨ë“ˆ ê°„ ê²°í•©ë„**ê°€ ë†’ì•„ì§€ëŠ” [[ê°•í•œ ê²°í•© (Tight Coupling)]] ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤. 
  -> ì¦‰, ì½”ë“œ ê°€ë…ì„±Â·ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§€ë©°, í”„ë¡œê·¸ë¨ì˜ ìƒíƒœë¥¼ ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ì›Œì§„ë‹¤.

>[!question] ì•”ë¬µì  ì˜ì¡´ì„± (ì˜ì¡´ì„± ì€ë‹‰) ì´í•´í•˜ê¸°
>ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•˜ë©´ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ **ì§ì ‘ ì°¸ì¡°**í•˜ê¸° ë•Œë¬¸ì—, í•´ë‹¹ í´ë˜ìŠ¤ê°€ ì–´ë–¤ ì˜ì¡´ì„±ì„ ê°–ëŠ”ì§€ ì™¸ë¶€ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ì§€ ì•Šê²Œ ëœë‹¤.
>ì´ ìƒí™©ì„ ***ì•”ë¬µì  ì˜ì¡´ì„± (ì˜ì¡´ì„± ì€ë‹‰)*** ì´ë¼ê³  ë¶€ë¥´ëŠ” ê²ƒ!
>
>ì–´ë–¤ í´ë˜ìŠ¤ê°€ `MyService.shared`ë¥¼ ì‚¬ìš©í•´ë„ ì´ê²ƒì´ ìƒì„±ìë‚˜ ë©”ì„œë“œ ìƒì—ì„œ `MyService`ì— ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ì•Œ ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸!
  
+ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œê¹Œì§€ ë©”ëª¨ë¦¬ì— ìƒì£¼í•˜ë¯€ë¡œ, ì˜ëª» ì‚¬ìš©í•˜ë©´ **ë©”ëª¨ë¦¬ ëˆ„ìˆ˜**ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

- ì „ì—­ ìƒíƒœë¥¼ ê°€ì§„ ì½”ë“œëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ì–´ë µë‹¤. 
  í…ŒìŠ¤íŠ¸ ê°„ ì „ì—­ ìƒíƒœê°€ ë‚¨ì•„ ìˆìœ¼ë©´ (ì˜¤ì—¼ë˜ë©´) í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ê±°ë‚˜ ìˆœì„œì— ì˜ì¡´í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. 



## References

- [Apple Developer Documentation - Managing a Shared Resource Using a Singleton](https://developer.apple.com/documentation/swift/managing-a-shared-resource-using-a-singleton)
- [Refactoring.Guru - Singleton](https://refactoring.guru/design-patterns/singleton#:~:text=1,a%20database%20or%20a%20file)
- [Apple iOS â€” Singleton Design Pattern](https://imad-ali.medium.com/apple-ios-singleton-design-pattern-2dec5b33f7)
- [Hidden Dependency in Single Design Pattern](https://medium.com/@amitaswal87/singleton-class-hidden-dependency-7bfbd82c85b8)
- [Demystifying Singleton Design Pattern: Implement Singletons in iOS](https://medium.com/@afonso.script.sol/demystifying-singleton-design-pattern-implement-singletons-in-ios-e1c38929ed4c)